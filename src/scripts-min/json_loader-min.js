function JsonHelper(){this.load=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onload=function(){try{var a=JSON.parse(c.responseText);b(a)}catch(a){console.error(a)}},c.setRequestHeader("Content-Type","*/*"),c.send()}}function Utilities(){this.tryMatchUrlExtension=function(a,b,c){b.every(function(b){var d=!0;return b.extensions.every(function(e){return!a.endsWith(e.extension)||(c(b),d=!1,!1)}),d})},this.getLanguageDetails=function(a,b,c){var d=new JsonHelper,e=a+b.language.toLowerCase()+".json";d.load(e,function(a){a.extensions=b.extensions,c(a)})},this.refresh=function(){var a=window.location.href;current_url!=a&&(current_url=a,window.setTimeout(function(){var a=new JsonHelper;a.load(url_ext,function(a){var b=new Utilities;b.tryMatchUrlExtension(current_url,a,function(a){b.getLanguageDetails(url_lang_base,a,function(a){new Highlighter(a).draw()})})})},100))}}var url_ext="https://raw.githubusercontent.com/luizperes/linguist-unknown/master/lib/extensions.json",url_lang_base="https://raw.githubusercontent.com/luizperes/linguist-unknown/master/lib/languages/",current_url="";document.addEventListener("DOMContentLoaded",function(){chrome.storage.sync.get("shouldWork",function(a){a.shouldWork&&((new Utilities).refresh(),document.body.addEventListener("DOMSubtreeModified",function(){(new Utilities).refresh()},!1))})});
